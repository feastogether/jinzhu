<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<title>çœŸç  å°ç£ä½³å‘³ âœ¦ æ±‚å¥½é‹</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700;900&family=Noto+Sans+TC:wght@300;400;500&display=swap');
:root{
  --green:#00352c; --green-mid:#2d6b5e; --green-lt:#7bbcad;
  --red:#d90050;   --gold:#c0ab7c;      --gold-lt:#e8d9a8;
  --cream:#fdf8f0; --warm:#f5ede0;      --warm2:#f0e4d0;
  --text:#00352c;  --text2:#4a3a28;     --text3:#9a8870;
  --font-s:'Noto Serif TC',serif; --font-n:'Noto Sans TC',sans-serif;
}
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;touch-action:manipulation;}
html,body{width:100%;height:100%;overflow:hidden;font-family:var(--font-n);background:var(--cream);}
.page{position:fixed;top:0;left:0;width:100%;height:100%;display:none;overflow:hidden;}
.page.active{display:block;}

/* PRELOADER */
#preloader{position:fixed;inset:0;background:var(--cream);display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:9999;transition:opacity .8s;}
.pre-logo{animation:breath 1.8s ease-in-out infinite;}
@keyframes breath{0%,100%{transform:scale(1);opacity:.85;}50%{transform:scale(1.07);opacity:1;}}
.pre-text{margin-top:14px;font-family:var(--font-s);font-size:.8rem;color:var(--green-mid);letter-spacing:.5em;}

/* OVERLAY */
.overlay{position:fixed;inset:0;background:var(--cream);z-index:5000;pointer-events:none;opacity:0;transition:opacity .3s;}
.overlay.in{opacity:1;pointer-events:all;}

/* SOUND */
#soundBtn{position:fixed;top:14px;right:14px;width:36px;height:36px;background:rgba(255,255,255,.88);border:1px solid #c8e6e0;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:300;font-size:1rem;}

/* â”€â”€ èŠ±ç£šèƒŒæ™¯ â”€â”€ */
.tile-bg{
  position:absolute;inset:0;pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Crect width='80' height='80' fill='none'/%3E%3Crect x='1' y='1' width='78' height='78' fill='none' stroke='%232d6b5e' stroke-width='.7' opacity='.14'/%3E%3Cline x1='40' y1='1' x2='40' y2='79' stroke='%232d6b5e' stroke-width='.5' opacity='.1'/%3E%3Cline x1='1' y1='40' x2='79' y2='40' stroke='%232d6b5e' stroke-width='.5' opacity='.1'/%3E%3Cline x1='1' y1='1' x2='79' y2='79' stroke='%232d6b5e' stroke-width='.35' opacity='.08'/%3E%3Cline x1='79' y1='1' x2='1' y2='79' stroke='%232d6b5e' stroke-width='.35' opacity='.08'/%3E%3Cpolygon points='40,22 52,32 58,40 52,48 40,58 28,48 22,40 28,32' fill='none' stroke='%232d6b5e' stroke-width='.7' opacity='.12'/%3E%3Crect x='34' y='34' width='12' height='12' fill='none' stroke='%23c0ab7c' stroke-width='.7' opacity='.18' transform='rotate(45 40 40)'/%3E%3Ccircle cx='1' cy='1' r='4' fill='none' stroke='%23d90050' stroke-width='.5' opacity='.1'/%3E%3Ccircle cx='79' cy='1' r='4' fill='none' stroke='%23d90050' stroke-width='.5' opacity='.1'/%3E%3Ccircle cx='1' cy='79' r='4' fill='none' stroke='%23d90050' stroke-width='.5' opacity='.1'/%3E%3Ccircle cx='79' cy='79' r='4' fill='none' stroke='%23d90050' stroke-width='.5' opacity='.1'/%3E%3C/svg%3E");
  background-size:80px 80px;
}

/* å½©è‰²ç£šæ¢ */
.tile-bar{position:absolute;left:0;right:0;height:9px;}
.tile-bar.top{top:0;background:repeating-linear-gradient(90deg,var(--green) 0 20px,var(--gold) 20px 40px,var(--red) 40px 60px,var(--green) 60px 80px);opacity:.82;}
.tile-bar.bottom{bottom:0;background:repeating-linear-gradient(90deg,var(--red) 0 20px,var(--green) 20px 40px,var(--gold) 40px 60px,var(--red) 60px 80px);opacity:.82;}

/* â”€â”€ COVER â”€â”€ */
#pageCover{background:linear-gradient(160deg,var(--cream) 0%,var(--warm) 100%);}
.cover-inner{position:relative;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;}

/* èŠ±ç£šå´æŸ± */
.pillar{position:absolute;top:0;bottom:0;width:min(11vw,46px);}
.pillar.left{left:0;}
.pillar.right{right:0;}

/* ä¸»è¦–è¦ºåœ“ç›¤ */
.disk-wrap{position:absolute;top:50%;left:50%;transform:translate(-50%,-54%);width:min(78vw,330px);height:min(78vw,330px);animation:floatDisk 6s ease-in-out infinite;}
@keyframes floatDisk{0%,100%{transform:translate(-50%,-54%);}50%{transform:translate(-50%,-58%);}}

/* æ¨™é¡Œ */
.cover-header{position:absolute;top:5%;left:0;right:0;display:flex;flex-direction:column;align-items:center;z-index:10;}
.cover-logo{width:min(52vw,210px);height:auto;}
.cover-div{display:flex;align-items:center;gap:10px;margin-top:12px;}
.cover-div span{height:1px;width:30px;background:linear-gradient(90deg,transparent,var(--gold),transparent);}
.cover-div em{font-style:normal;color:var(--gold);font-size:.72rem;letter-spacing:.3em;}

/* æŒ‰éˆ• */
.btn-enter-wrap{position:absolute;bottom:9%;left:50%;transform:translateX(-50%);z-index:10;cursor:pointer;}
.btn-enter{
  background:var(--green);color:var(--cream);
  font-family:var(--font-s);font-size:clamp(.95rem,4.2vw,1.15rem);
  font-weight:600;letter-spacing:.4em;padding:14px 44px;
  border-radius:4px;border:none;
  box-shadow:0 4px 0 #001a15,0 6px 18px rgba(0,53,44,.25);
  transition:all .15s;white-space:nowrap;position:relative;overflow:hidden;
}
.btn-enter::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:repeating-linear-gradient(90deg,var(--gold) 0 8px,transparent 8px 16px);}
.btn-enter-wrap:active .btn-enter{transform:translateY(3px);box-shadow:0 1px 0 #001a15;}

/* ç²’å­ */
.petal{position:absolute;pointer-events:none;animation:drift linear infinite;z-index:3;}
@keyframes drift{0%{transform:translateY(-20px) rotate(0);opacity:0;}5%{opacity:.55;}95%{opacity:.1;}100%{transform:translateY(108vh) rotate(540deg);opacity:0;}}

/* é™€èºå„€ */
.perm-dlg{position:fixed;inset:0;background:rgba(0,53,44,.5);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:1000;}
.perm-dlg.show{display:flex;}
.perm-box{background:var(--cream);border-radius:8px;border-top:4px solid var(--red);padding:28px 26px;max-width:290px;text-align:center;box-shadow:0 16px 50px rgba(0,0,0,.2);}
.perm-box h3{font-family:var(--font-s);color:var(--text);font-size:1.05rem;margin-bottom:8px;}
.perm-box p{color:var(--text2);font-size:.86rem;line-height:1.8;margin-bottom:18px;}
.perm-box button{background:var(--green);color:var(--cream);font-family:var(--font-s);font-size:.95rem;font-weight:600;letter-spacing:.2em;padding:10px 28px;border-radius:4px;border:none;cursor:pointer;}

/* â”€â”€ GAME â”€â”€ */
#pageGame{background:var(--warm);}
.game-wrap{position:relative;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;}
.game-top{position:absolute;top:5%;left:0;right:0;display:flex;flex-direction:column;align-items:center;gap:4px;}
.game-logo{width:min(38vw,152px);height:auto;}
.game-title{font-family:var(--font-s);font-size:clamp(.9rem,4vw,1.2rem);color:var(--text);letter-spacing:.2em;font-weight:700;margin-top:4px;}
.shake-tip{position:absolute;top:22%;left:0;right:0;text-align:center;transition:opacity .5s,transform .5s;}
.shake-tip.hidden{opacity:0;transform:translateY(-8px);pointer-events:none;}
.shake-tip p{font-family:var(--font-s);font-size:clamp(.88rem,3.8vw,1.05rem);color:var(--text2);line-height:2.2;letter-spacing:.12em;}
.shake-tip em{font-style:normal;color:var(--green-mid);font-weight:700;}
.shake-can{width:min(38vw,152px);height:min(48vw,192px);cursor:pointer;}
.shake-can.shaking{animation:canShake 2s cubic-bezier(.36,.07,.19,.97);}
@keyframes canShake{
  0%{transform:rotate(0);}5%{transform:rotate(-20deg) translateX(-5px);}10%{transform:rotate(20deg) translateX(5px);}
  15%{transform:rotate(-24deg) translateX(-7px);}20%{transform:rotate(24deg) translateX(7px);}
  30%{transform:rotate(18deg) translateX(5px);}40%{transform:rotate(22deg) translateX(6px);}
  55%{transform:rotate(10deg) translateX(3px);}70%{transform:rotate(-5deg) translateX(-1px);}
  85%{transform:rotate(3deg);}100%{transform:rotate(0);}
}
.tap-hint{text-align:center;margin-top:14px;font-size:clamp(.72rem,2.8vw,.86rem);color:var(--text3);letter-spacing:.2em;animation:blink 2.5s ease-in-out infinite;}
@keyframes blink{0%,100%{opacity:.3;}50%{opacity:.85;}}

/* ç±¤ç«¹é£›å‡º */
#stickOverlay{position:fixed;inset:0;pointer-events:none;z-index:4500;overflow:hidden;display:none;}
#stickOverlay.active{display:block;}
.flying-stick{
  position:absolute;bottom:42%;
  font-family:var(--font-s);font-weight:900;
  writing-mode:vertical-rl;
  background:linear-gradient(180deg,#fffdf5,#f5e8c0);
  border-top:3px solid var(--red);border-left:1.5px solid var(--gold);
  border-right:1.5px solid var(--gold);border-bottom:1.5px solid var(--gold);
  border-radius:3px;padding:10px 7px 14px;
  box-shadow:3px 3px 12px rgba(0,0,0,.2),inset 0 1px 0 rgba(255,255,255,.7);
  letter-spacing:.18em;line-height:1.9;color:var(--text);
  font-size:clamp(15px,4.2vw,22px);opacity:0;
  animation:stickFly var(--dur,1.1s) cubic-bezier(.22,.61,.36,1) var(--delay,0s) forwards;
}
@keyframes stickFly{
  0%{opacity:0;transform:translateY(20px) rotate(var(--r0)) scale(.3);}
  12%{opacity:1;transform:translateY(var(--y1)) rotate(var(--r1)) scale(1.08);}
  55%{opacity:1;transform:translateY(var(--y2)) rotate(var(--r2)) scale(1);}
  85%{opacity:.9;transform:translateY(var(--y3)) rotate(var(--r3)) scale(.98);}
  100%{opacity:0;transform:translateY(var(--y3)) rotate(var(--r3)) scale(.95);}
}

/* â”€â”€ RESULT â”€â”€ */
#pageResult{background:var(--cream);overflow-y:auto;-webkit-overflow-scrolling:touch;}
.result-wrap{min-height:100%;display:flex;flex-direction:column;align-items:center;padding:22px 18px 44px;}
.r-logo-row{display:flex;align-items:center;gap:12px;margin-bottom:14px;}
.r-logo{width:min(34vw,136px);height:auto;}
.r-logo-sep{width:1px;height:32px;background:#c8e6e0;}
.r-logo-label{font-family:var(--font-n);font-size:.66rem;color:var(--text3);letter-spacing:.4em;line-height:1.8;}

/* èŠ±ç£šåˆ†éš”æ¢ */
.tile-div{width:100%;max-width:380px;height:14px;margin:10px 0;border-radius:3px;opacity:.75;
  background:repeating-linear-gradient(90deg,var(--green) 0 10px,var(--gold) 10px 20px,var(--red) 20px 30px,var(--green) 30px 40px);}
.tile-div-thin{width:100%;max-width:380px;height:7px;margin:8px 0;border-radius:2px;opacity:.5;
  background:repeating-linear-gradient(90deg,var(--gold) 0 8px,var(--green) 8px 16px,var(--gold) 16px 24px);}

.r-title{text-align:center;margin-bottom:12px;}
.r-title h2{font-family:var(--font-s);font-size:clamp(1.3rem,5.5vw,2rem);color:var(--text);font-weight:900;letter-spacing:.25em;}
.r-title p{font-size:.7rem;color:var(--text3);letter-spacing:.4em;margin-top:4px;}

/* ç±¤å¡ */
.f-card{width:100%;max-width:380px;background:var(--cream);border:1.5px solid #c8e6e0;border-radius:6px;overflow:hidden;box-shadow:0 8px 36px rgba(0,53,44,.1);}
.card-tile-band{height:10px;background:repeating-linear-gradient(90deg,var(--green) 0 16px,var(--cream) 16px 18px,var(--red) 18px 34px,var(--cream) 34px 36px,var(--gold) 36px 52px,var(--cream) 52px 54px);}
.card-hd{padding:20px 22px 14px;text-align:center;background:linear-gradient(180deg,rgba(192,171,124,.08) 0%,transparent 100%);border-bottom:1px solid #c8e6e0;}
.card-num{font-family:var(--font-s);font-size:clamp(1.2rem,5vw,1.6rem);font-weight:900;color:var(--text);letter-spacing:.2em;}
.card-badge-row{margin-top:8px;display:flex;align-items:center;justify-content:center;}
.badge{display:inline-flex;align-items:center;padding:5px 20px;border-radius:3px;font-family:var(--font-s);font-size:clamp(.82rem,3.3vw,.96rem);font-weight:700;letter-spacing:.15em;}
.badge-great{background:var(--green);color:var(--cream);}
.badge-good{background:#5a9e6a;color:var(--cream);}
.badge-ok{background:var(--gold);color:var(--text);}
.badge-bad{background:#8a8a8a;color:var(--cream);}
.card-poem{padding:18px 22px;border-bottom:1px solid rgba(0,53,44,.1);text-align:center;background:rgba(192,171,124,.05);}
.poem-line{font-family:var(--font-s);font-size:clamp(.95rem,3.8vw,1.08rem);color:var(--text);line-height:2.4;letter-spacing:.2em;opacity:0;transform:translateY(16px);animation:lineUp .45s ease forwards;}
@keyframes lineUp{to{opacity:1;transform:translateY(0);}}
.card-sects{padding:14px 18px 18px;}
.sect{display:flex;align-items:flex-start;padding:9px 0;border-bottom:1px dashed rgba(0,53,44,.15);opacity:0;transform:translateX(-10px);animation:slideIn .38s ease forwards;}
@keyframes slideIn{to{opacity:1;transform:translateX(0);}}
.sect:last-child{border-bottom:none;}
.sect-tag{flex:0 0 auto;background:var(--green);color:var(--cream);font-size:.7rem;font-weight:600;padding:3px 10px;border-radius:2px;letter-spacing:.1em;margin-right:10px;margin-top:3px;white-space:nowrap;}
.sect-body{color:var(--text2);font-size:clamp(.8rem,3vw,.9rem);line-height:1.9;letter-spacing:.04em;}

.r-btns{display:flex;gap:12px;margin-top:18px;width:100%;max-width:380px;}
.rbtn{flex:1;padding:13px 10px;border-radius:4px;font-family:var(--font-s);font-size:clamp(.82rem,3.3vw,.96rem);font-weight:600;letter-spacing:.2em;cursor:pointer;transition:all .15s;border:none;}
.rbtn:active{transform:translateY(2px);}
.rbtn-out{background:transparent;border:1.5px solid var(--green) !important;color:var(--green);}
.rbtn-fill{background:var(--green);color:var(--cream);box-shadow:0 3px 0 #001a15;}
.rbtn-fill:active{box-shadow:0 1px 0 #001a15;}
.brand-ft{margin-top:18px;text-align:center;color:var(--text3);font-size:.68rem;letter-spacing:.3em;}

/* â”€â”€ PANEL â”€â”€ */
#hTrigger{position:fixed;bottom:0;right:0;width:50px;height:50px;z-index:9990;}
#panel{position:fixed;bottom:-100%;left:0;right:0;max-height:84%;background:var(--cream);border-top:4px solid var(--green);border-radius:16px 16px 0 0;z-index:9995;overflow-y:auto;-webkit-overflow-scrolling:touch;transition:bottom .4s cubic-bezier(.34,1.2,.64,1);padding-bottom:30px;box-shadow:0 -8px 40px rgba(0,53,44,.15);}
#panel.open{bottom:0;}
.ph{display:flex;align-items:center;justify-content:space-between;padding:14px 20px 12px;border-bottom:1px solid #c8e6e0;position:sticky;top:0;background:var(--cream);z-index:1;}
.ph h2{font-family:var(--font-s);font-size:1rem;color:var(--text);letter-spacing:.2em;}
.ph-close{background:none;border:none;color:var(--text3);font-size:1.4rem;cursor:pointer;}
.pb{padding:16px 20px;}
.ps{margin-bottom:20px;}
.ps h3{font-size:.73rem;font-weight:600;color:var(--green-mid);letter-spacing:.3em;text-transform:uppercase;margin-bottom:10px;padding-bottom:5px;border-bottom:1px solid #c8e6e0;}
.cr{margin-bottom:10px;}
.cr label{display:block;font-size:.76rem;color:var(--text3);margin-bottom:4px;}
.cr input,.cr textarea,.cr select{width:100%;border:1.5px solid #c8e6e0;border-radius:6px;padding:8px 12px;color:var(--text);font-family:var(--font-n);font-size:.84rem;outline:none;background:#fff;}
.cr input:focus,.cr textarea:focus{border-color:var(--green);}
.cr textarea{height:70px;resize:vertical;}
.p-btn{width:100%;background:var(--green);color:var(--cream);font-family:var(--font-s);font-size:.95rem;font-weight:600;letter-spacing:.3em;padding:13px;border-radius:4px;border:none;cursor:pointer;box-shadow:0 3px 0 #001a15;margin-top:4px;}
.p-btn:active{transform:translateY(2px);box-shadow:0 1px 0 #001a15;}
.fi{border:1px solid #c8e6e0;border-radius:6px;padding:12px;margin-bottom:10px;}
.fi-hd{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;}
.fi-hd span{font-size:.82rem;color:var(--text);font-weight:600;}
.fi-hd button{background:none;border:none;color:var(--red);cursor:pointer;font-size:1rem;}
</style>
</head>
<body>

<!-- é è¼‰ -->
<div id="preloader">
  <svg class="pre-logo" width="160" height="60" viewBox="0 0 103.276 38.725" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(-62 -149.472)">
      <g transform="translate(62 149.472)"><g><g>
        <path d="M85.169,165.46a9.785,9.785,0,0,1,15.324.017,9.843,9.843,0,0,1,2.469-.31,9.632,9.632,0,0,1,3.33.593.555.555,0,0,0,.682-.794l-4.406-7.651a1.577,1.577,0,0,0-1.377-.805l-16.7-.018a1.6,1.6,0,0,0-1.385.8l-4.431,7.652a.555.555,0,0,0,.679.8,9.669,9.669,0,0,1,3.345-.591A9.863,9.863,0,0,1,85.169,165.46Z" transform="translate(-71.549 -153.51)" fill="#00352c"/>
        <path d="M103.939,166.254l-8.333-14.469a4.59,4.59,0,0,0-3.963-2.294l-16.7-.018a4.591,4.591,0,0,0-3.968,2.285l-8.365,14.451a4.592,4.592,0,0,0,0,4.578l8.333,14.47A4.592,4.592,0,0,0,74.9,187.55l16.7.018a4.592,4.592,0,0,0,3.968-2.285l8.365-14.452A4.589,4.589,0,0,0,103.939,166.254Zm-1.185,3.254a2.9,2.9,0,0,1-.227.51l-8.365,14.452a2.962,2.962,0,0,1-2.559,1.473l-16.7-.019a2.961,2.961,0,0,1-2.555-1.479l-8.333-14.47a2.918,2.918,0,0,1-.226-.511,2.959,2.959,0,0,1,.229-2.441l8.365-14.451a2.961,2.961,0,0,1,2.558-1.473l16.7.019A2.961,2.961,0,0,1,94.2,152.6l8.333,14.469A2.958,2.958,0,0,1,102.754,169.508Z" transform="translate(-62 -149.472)" fill="#00352c"/>
        <path d="M105.579,181.382a2.711,2.711,0,0,0-.263-2.052,8.168,8.168,0,0,0-14.043-.015,8.168,8.168,0,0,0-14.043.015,2.711,2.711,0,0,0,.263,2.052l7.168,12.441a1.6,1.6,0,0,0,1.383.8h.333c-.01-.161-.024-.32-.024-.483a8.04,8.04,0,0,1,16.08.018c0,.163-.015.322-.025.483h.333a1.6,1.6,0,0,0,1.384-.8Z" transform="translate(-66.57 -162.86)" fill="#d90050"/>
        <path d="M103.367,215.888a6.413,6.413,0,0,0-6.421,6.406c0,.163.012.323.024.483l6.421.007,6.421-.007c.012-.16.025-.319.025-.483A6.414,6.414,0,0,0,103.367,215.888Z" transform="translate(-82.103 -187.678)" fill="#c0ab7c"/>
      </g></g></g>
      <g transform="translate(108.559 150.315)">
        <path d="M176.08,213.646s.094,2.4.114,6.2a2.782,2.782,0,0,1-1.472,2.473l.2.636a9.545,9.545,0,0,0,1.5-.5,2.782,2.782,0,0,0,1.472-2.473c0-1-.014-4.564,0-5.218S176.08,213.646,176.08,213.646Z" transform="translate(-172.294 -187.23)" fill="#00352c"/>
        <path d="M190.862,216.934c.024-1,.111-3.274.111-3.274s.037.562.094,2.4c0,0,.123,5.477-.1,6.889a13.472,13.472,0,0,1,2.233,0S190.828,218.346,190.862,216.934Z" transform="translate(-181.469 -187.238)" fill="#00352c"/>
        <path d="M208.921,213.68s.237,4.481.072,6.495l-5.848-6.5a1.8,1.8,0,0,1-1.241,0,62.394,62.394,0,0,1-.189,9.292,3.618,3.618,0,0,1,1.258,0s-.135-5.789-.047-6.533l5.9,6.54a2.007,2.007,0,0,1,1.082,0s-.063-6.04.226-9.292Z" transform="translate(-188.93 -187.247)" fill="#00352c"/>
        <path d="M228.517,222.351a1.285,1.285,0,1,0,1.284,1.287A1.285,1.285,0,0,0,228.517,222.351Z" transform="translate(-203.608 -192.239)" fill="#00352c"/>
        <path d="M237.171,213.712s1.751-.119,4.231-.04l-4.795,8.006V223s4.485-.122,7.6.009a1.954,1.954,0,0,1,0-1.082,29.16,29.16,0,0,1-4.724.086l4.209-7.083.536-.9v-.311A54.126,54.126,0,0,1,237.171,213.712Z" transform="translate(-209.001 -187.27)" fill="#00352c"/>
        <path d="M268.506,217.02s.094,2.4.021,1.278c-.488.033-1.21.064-2.213.063-.855,0-1.473-.025-1.913-.053,0-.159,0-.3,0-.422s.094,2.4-.1,6.889a13.472,13.472,0,0,1,2.233,0s-.082-2.531-.111-4.416c.523-.053,1.259-.114,1.913-.113.674,0,1.572.067,2.214.123a39.891,39.891,0,0,1-.136,4.411,13.469,13.469,0,0,1,2.233,0S268.472,218.432,268.506,217.02Z" transform="translate(-222.617 -187.284)" fill="#00352c"/>
        <path d="M292.419,213.692s.133,5.44-.133,8.612a3.184,3.184,0,0,1-3.474,2.829c-3.254,0-4.366-1.395-4.386-4.036-.02-2.984.162-4.048-.123-5.435a8.756,8.756,0,0,0,2.218,0s-.154,3.784-.154,5.822.939,2.769,2.66,2.756,2.149-1.372,2.27-3.172.133-5.44-.133-5.44A2.775,2.775,0,0,0,292.419,213.692Z" transform="translate(-237.16 -187.258)" fill="#00352c"/>
      </g>
      <g transform="translate(117.095 156.526)">
        <path d="M192.094,168.693l7.512,2.916a.6.6,0,0,0,.812-.555l0-1.462a.6.6,0,0,0-.38-.556l-7.512-2.916a.6.6,0,0,0-.813.555l0,1.462A.6.6,0,0,0,192.094,168.693Z" transform="translate(-191.713 -166.079)" fill="#00352c"/>
        <path d="M192.094,177.117l7.512,2.916a.6.6,0,0,0,.812-.555l0-1.462a.6.6,0,0,0-.38-.556l-7.512-2.916a.6.6,0,0,0-.813.555l0,1.462A.6.6,0,0,0,192.094,177.117Z" transform="translate(-191.713 -174.503)" fill="#00352c"/>
        <path d="M192.094,185.542l7.512,2.916a.6.6,0,0,0,.812-.555l0-1.462a.6.6,0,0,0-.38-.557l-7.512-2.916a.6.6,0,0,0-.813.555l0,1.462A.6.6,0,0,0,192.094,185.542Z" transform="translate(-191.713 -182.927)" fill="#00352c"/>
      </g>
    </g>
  </svg>
  <div class="pre-text">æ­£åœ¨ç‚ºæ‚¨ç¥ˆç¦ Â· è«‹ç¨å€™</div>
</div>

<div class="overlay" id="overlay"></div>
<button id="soundBtn">ğŸ”Š</button>
<div id="stickOverlay"></div>

<!-- â•â•â•â•â•â•â•â•â•â• COVER â•â•â•â•â•â•â•â•â•â• -->
<div class="page active" id="pageCover">
  <div class="tile-bg"></div>
  <div class="tile-bar top"></div>
  <div class="tile-bar bottom"></div>

  <!-- å·¦å´æŸ± -->
  <div class="pillar left">
    <svg width="100%" height="100%" viewBox="0 0 46 800" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg">
      <defs><pattern id="plL" x="0" y="0" width="46" height="92" patternUnits="userSpaceOnUse">
        <rect width="46" height="92" fill="#f5ede0"/>
        <rect x="3" y="3" width="40" height="40" fill="none" stroke="#2d6b5e" stroke-width="1.2" opacity=".55"/>
        <line x1="3" y1="23" x2="43" y2="23" stroke="#2d6b5e" stroke-width=".7" opacity=".35"/>
        <line x1="23" y1="3" x2="23" y2="43" stroke="#2d6b5e" stroke-width=".7" opacity=".35"/>
        <circle cx="23" cy="23" r="8" fill="none" stroke="#c0ab7c" stroke-width="1" opacity=".45"/>
        <circle cx="23" cy="23" r="3" fill="#c0ab7c" opacity=".35"/>
        <rect x="3" y="49" width="40" height="40" fill="none" stroke="#d90050" stroke-width="1.2" opacity=".35"/>
        <line x1="3" y1="69" x2="43" y2="69" stroke="#d90050" stroke-width=".7" opacity=".25"/>
        <line x1="23" y1="49" x2="23" y2="89" stroke="#d90050" stroke-width=".7" opacity=".25"/>
        <rect x="15" y="61" width="16" height="16" fill="none" stroke="#2d6b5e" stroke-width=".8" opacity=".35" transform="rotate(45 23 69)"/>
      </pattern></defs>
      <rect width="46" height="800" fill="url(#plL)"/>
    </svg>
  </div>
  <!-- å³å´æŸ± -->
  <div class="pillar right">
    <svg width="100%" height="100%" viewBox="0 0 46 800" preserveAspectRatio="xMidYMid slice" xmlns="http://www.w3.org/2000/svg">
      <defs><pattern id="plR" x="0" y="0" width="46" height="92" patternUnits="userSpaceOnUse">
        <rect width="46" height="92" fill="#f5ede0"/>
        <rect x="3" y="3" width="40" height="40" fill="none" stroke="#d90050" stroke-width="1.2" opacity=".38"/>
        <line x1="3" y1="23" x2="43" y2="23" stroke="#d90050" stroke-width=".7" opacity=".25"/>
        <line x1="23" y1="3" x2="23" y2="43" stroke="#d90050" stroke-width=".7" opacity=".25"/>
        <circle cx="23" cy="23" r="8" fill="none" stroke="#c0ab7c" stroke-width="1" opacity=".42"/>
        <circle cx="23" cy="23" r="3" fill="#d90050" opacity=".28"/>
        <rect x="3" y="49" width="40" height="40" fill="none" stroke="#2d6b5e" stroke-width="1.2" opacity=".48"/>
        <line x1="3" y1="69" x2="43" y2="69" stroke="#2d6b5e" stroke-width=".7" opacity=".32"/>
        <line x1="23" y1="49" x2="23" y2="89" stroke="#2d6b5e" stroke-width=".7" opacity=".32"/>
        <rect x="15" y="61" width="16" height="16" fill="none" stroke="#c0ab7c" stroke-width=".8" opacity=".38" transform="rotate(45 23 69)"/>
      </pattern></defs>
      <rect width="46" height="800" fill="url(#plR)"/>
    </svg>
  </div>

  <!-- ä¸»åœ“ç›¤ -->
  <div class="disk-wrap" id="lDisk">
    <svg viewBox="0 0 330 330" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
      <circle cx="165" cy="165" r="160" fill="rgba(245,237,224,.88)" stroke="#c0ab7c" stroke-width="2"/>
      <circle cx="165" cy="165" r="152" fill="none" stroke="#2d6b5e" stroke-width=".8" stroke-dasharray="5 6" opacity=".38"/>
      <!-- æ”¾å°„ç·š -->
      <line x1="165" y1="5" x2="165" y2="325" stroke="#2d6b5e" stroke-width=".7" opacity=".15"/>
      <line x1="5" y1="165" x2="325" y2="165" stroke="#2d6b5e" stroke-width=".7" opacity=".15"/>
      <line x1="51" y1="51" x2="279" y2="279" stroke="#2d6b5e" stroke-width=".7" opacity=".15"/>
      <line x1="279" y1="51" x2="51" y2="279" stroke="#2d6b5e" stroke-width=".7" opacity=".15"/>
      <!-- å››æ­£æ–¹å‰å­— -->
      <circle cx="165" cy="38" r="18" fill="#fdf8f0" stroke="#2d6b5e" stroke-width="1.5"/>
      <text x="165" y="44" text-anchor="middle" font-size="14" fill="#00352c" font-family="serif" font-weight="bold">ç¦</text>
      <circle cx="165" cy="292" r="18" fill="#fdf8f0" stroke="#d90050" stroke-width="1.5"/>
      <text x="165" y="298" text-anchor="middle" font-size="14" fill="#d90050" font-family="serif" font-weight="bold">ç¥¿</text>
      <circle cx="38" cy="165" r="18" fill="#fdf8f0" stroke="#2d6b5e" stroke-width="1.5"/>
      <text x="38" y="171" text-anchor="middle" font-size="14" fill="#00352c" font-family="serif" font-weight="bold">å£½</text>
      <circle cx="292" cy="165" r="18" fill="#fdf8f0" stroke="#d90050" stroke-width="1.5"/>
      <text x="292" y="171" text-anchor="middle" font-size="14" fill="#d90050" font-family="serif" font-weight="bold">å–œ</text>
      <!-- å››è§’å°åœ“ -->
      <circle cx="82" cy="82" r="14" fill="#fdf8f0" stroke="#c0ab7c" stroke-width="1.2"/>
      <text x="82" y="87" text-anchor="middle" font-size="11" fill="#c0ab7c" font-family="serif" font-weight="bold">è²¡</text>
      <circle cx="248" cy="82" r="14" fill="#fdf8f0" stroke="#c0ab7c" stroke-width="1.2"/>
      <text x="248" y="87" text-anchor="middle" font-size="11" fill="#c0ab7c" font-family="serif" font-weight="bold">å¯Œ</text>
      <circle cx="82" cy="248" r="14" fill="#fdf8f0" stroke="#c0ab7c" stroke-width="1.2"/>
      <text x="82" y="253" text-anchor="middle" font-size="11" fill="#c0ab7c" font-family="serif" font-weight="bold">å‰</text>
      <circle cx="248" cy="248" r="14" fill="#fdf8f0" stroke="#c0ab7c" stroke-width="1.2"/>
      <text x="248" y="253" text-anchor="middle" font-size="11" fill="#c0ab7c" font-family="serif" font-weight="bold">ç¥¥</text>
      <!-- ä¸­åœˆ -->
      <circle cx="165" cy="165" r="120" fill="none" stroke="#c0ab7c" stroke-width="1.2" opacity=".45"/>
      <polygon points="165,69 209,117 209,213 165,261 121,213 121,117" fill="rgba(192,171,124,.1)" stroke="#c0ab7c" stroke-width="1.2" opacity=".55"/>
      <!-- å…§åœˆ -->
      <circle cx="165" cy="165" r="60" fill="rgba(253,248,240,.95)" stroke="#2d6b5e" stroke-width="2"/>
      <!-- å…§å…­è§’ -->
      <polygon points="165,120 195,142 195,188 165,210 135,188 135,142" fill="none" stroke="#d90050" stroke-width="1.5" opacity=".7"/>
      <!-- ä¸­å¿ƒç±¤ç­’ -->
      <rect x="149" y="142" width="32" height="44" rx="4" fill="#2d6b5e" opacity=".85"/>
      <rect x="147" y="137" width="36" height="12" rx="6" fill="#4a8c7f"/>
      <ellipse cx="165" cy="137" rx="18" ry="6" fill="#4a8c7f"/>
      <line x1="157" y1="160" x2="157" y2="178" stroke="#c0ab7c" stroke-width="1.2"/>
      <line x1="165" y1="160" x2="165" y2="178" stroke="#c0ab7c" stroke-width="1.2"/>
      <line x1="173" y1="160" x2="173" y2="178" stroke="#c0ab7c" stroke-width="1.2"/>
      <text x="165" y="153" text-anchor="middle" font-size="7" fill="rgba(255,248,220,.82)" font-family="sans-serif">çœŸç </text>
    </svg>
  </div>

  <!-- åœ°æ¿å¸¶ -->
  <div style="position:absolute;bottom:0;left:0;width:100%;" id="lBase">
    <svg viewBox="0 0 400 90" width="100%" height="auto" preserveAspectRatio="xMidYMax meet" xmlns="http://www.w3.org/2000/svg">
      <defs><pattern id="floor" x="0" y="0" width="50" height="50" patternUnits="userSpaceOnUse">
        <rect width="50" height="50" fill="#f0e4d0"/>
        <rect x="1" y="1" width="48" height="48" fill="none" stroke="#c0ab7c" stroke-width=".6" opacity=".45"/>
        <line x1="25" y1="1" x2="25" y2="49" stroke="#c0ab7c" stroke-width=".4" opacity=".28"/>
        <line x1="1" y1="25" x2="49" y2="25" stroke="#c0ab7c" stroke-width=".4" opacity=".28"/>
      </pattern></defs>
      <rect x="0" y="42" width="400" height="48" fill="url(#floor)"/>
      <rect x="0" y="38" width="400" height="4" fill="#c0ab7c" opacity=".55"/>
      <!-- å½©ç£šæ¢ -->
      <rect x="0" y="34" width="400" height="4" fill="url(#tilePillar)" opacity=".6"/>
      <!-- ç‰†é¢å°ç£š -->
      <rect x="15" y="8" width="28" height="24" rx="2" fill="none" stroke="#2d6b5e" stroke-width=".8" opacity=".28"/>
      <rect x="55" y="8" width="28" height="24" rx="2" fill="none" stroke="#d90050" stroke-width=".8" opacity=".22"/>
      <rect x="95" y="8" width="28" height="24" rx="2" fill="none" stroke="#c0ab7c" stroke-width=".8" opacity=".28"/>
      <rect x="135" y="8" width="28" height="24" rx="2" fill="none" stroke="#2d6b5e" stroke-width=".8" opacity=".28"/>
      <rect x="175" y="8" width="28" height="24" rx="2" fill="none" stroke="#d90050" stroke-width=".8" opacity=".22"/>
      <rect x="215" y="8" width="28" height="24" rx="2" fill="none" stroke="#c0ab7c" stroke-width=".8" opacity=".28"/>
      <rect x="255" y="8" width="28" height="24" rx="2" fill="none" stroke="#2d6b5e" stroke-width=".8" opacity=".28"/>
      <rect x="295" y="8" width="28" height="24" rx="2" fill="none" stroke="#d90050" stroke-width=".8" opacity=".22"/>
      <rect x="335" y="8" width="28" height="24" rx="2" fill="none" stroke="#c0ab7c" stroke-width=".8" opacity=".28"/>
      <rect x="375" y="8" width="24" height="24" rx="2" fill="none" stroke="#2d6b5e" stroke-width=".8" opacity=".28"/>
    </svg>
  </div>

  <!-- å°é¢ logo + æ¨™é¡Œ -->
  <div class="cover-header">
    <svg class="cover-logo" viewBox="0 0 103.276 38.725" xmlns="http://www.w3.org/2000/svg">
      <g transform="translate(-62 -149.472)">
        <g transform="translate(62 149.472)"><g><g>
          <path d="M85.169,165.46a9.785,9.785,0,0,1,15.324.017,9.843,9.843,0,0,1,2.469-.31,9.632,9.632,0,0,1,3.33.593.555.555,0,0,0,.682-.794l-4.406-7.651a1.577,1.577,0,0,0-1.377-.805l-16.7-.018a1.6,1.6,0,0,0-1.385.8l-4.431,7.652a.555.555,0,0,0,.679.8,9.669,9.669,0,0,1,3.345-.591A9.863,9.863,0,0,1,85.169,165.46Z" transform="translate(-71.549 -153.51)" fill="#00352c"/>
          <path d="M103.939,166.254l-8.333-14.469a4.59,4.59,0,0,0-3.963-2.294l-16.7-.018a4.591,4.591,0,0,0-3.968,2.285l-8.365,14.451a4.592,4.592,0,0,0,0,4.578l8.333,14.47A4.592,4.592,0,0,0,74.9,187.55l16.7.018a4.592,4.592,0,0,0,3.968-2.285l8.365-14.452A4.589,4.589,0,0,0,103.939,166.254Zm-1.185,3.254a2.9,2.9,0,0,1-.227.51l-8.365,14.452a2.962,2.962,0,0,1-2.559,1.473l-16.7-.019a2.961,2.961,0,0,1-2.555-1.479l-8.333-14.47a2.918,2.918,0,0,1-.226-.511,2.959,2.959,0,0,1,.229-2.441l8.365-14.451a2.961,2.961,0,0,1,2.558-1.473l16.7.019A2.961,2.961,0,0,1,94.2,152.6l8.333,14.469A2.958,2.958,0,0,1,102.754,169.508Z" transform="translate(-62 -149.472)" fill="#00352c"/>
          <path d="M105.579,181.382a2.711,2.711,0,0,0-.263-2.052,8.168,8.168,0,0,0-14.043-.015,8.168,8.168,0,0,0-14.043.015,2.711,2.711,0,0,0,.263,2.052l7.168,12.441a1.6,1.6,0,0,0,1.383.8h.333c-.01-.161-.024-.32-.024-.483a8.04,8.04,0,0,1,16.08.018c0,.163-.015.322-.025.483h.333a1.6,1.6,0,0,0,1.384-.8Z" transform="translate(-66.57 -162.86)" fill="#d90050"/>
          <path d="M103.367,215.888a6.413,6.413,0,0,0-6.421,6.406c0,.163.012.323.024.483l6.421.007,6.421-.007c.012-.16.025-.319.025-.483A6.414,6.414,0,0,0,103.367,215.888Z" transform="translate(-82.103 -187.678)" fill="#c0ab7c"/>
        </g></g></g>
        <g transform="translate(108.559 150.315)">
          <path d="M176.08,213.646s.094,2.4.114,6.2a2.782,2.782,0,0,1-1.472,2.473l.2.636a9.545,9.545,0,0,0,1.5-.5,2.782,2.782,0,0,0,1.472-2.473c0-1,0-4.564,0-5.218S176.08,213.646,176.08,213.646Z" transform="translate(-172.294 -187.23)" fill="#00352c"/>
          <path d="M190.862,216.934c.024-1,.111-3.274.111-3.274s.094,2.4.123,5.477c-.1,6.889a13.472,13.472,0,0,1,2.233,0S190.828,218.346,190.862,216.934Z" transform="translate(-181.469 -187.238)" fill="#00352c"/>
          <path d="M208.921,213.68s.237,4.481.072,6.495l-5.848-6.5a1.8,1.8,0,0,1-1.241,0,62.394,62.394,0,0,1-.189,9.292,3.618,3.618,0,0,1,1.258,0s-.135-5.789-.047-6.533l5.9,6.54a2.007,2.007,0,0,1,1.082,0s-.063-6.04.226-9.292Z" transform="translate(-188.93 -187.247)" fill="#00352c"/>
          <path d="M228.517,222.351a1.285,1.285,0,1,0,1.284,1.287A1.285,1.285,0,0,0,228.517,222.351Z" transform="translate(-203.608 -192.239)" fill="#00352c"/>
          <path d="M237.171,213.712s1.751-.119,4.231-.04l-4.795,8.006V223s4.485-.122,7.6.009a1.954,1.954,0,0,1,0-1.082,29.16,29.16,0,0,1-4.724.086l4.209-7.083.536-.9v-.311A54.126,54.126,0,0,1,237.171,213.712Z" transform="translate(-209.001 -187.27)" fill="#00352c"/>
          <path d="M268.506,213.746s.094,2.4.021,1.278c-.488.033-1.21.064-2.213.063-.855,0-1.473-.025-1.913-.053s.094,2.4-.1,6.889a13.472,13.472,0,0,1,2.233,0s-.082-2.531-.111-4.416c.523-.053,1.259-.114,1.913-.113.674,0,1.572.067,2.214.123a39.891,39.891,0,0,1-.136,4.411,13.469,13.469,0,0,1,2.233,0S268.472,218.432,268.506,213.746Z" transform="translate(-222.617 -187.284)" fill="#00352c"/>
          <path d="M292.419,213.692s.133,5.44-.133,8.612a3.184,3.184,0,0,1-3.474,2.829c-3.254,0-4.366-1.395-4.386-4.036-.02-2.984.162-4.048-.123-5.435a8.756,8.756,0,0,0,2.218,0s-.154,3.784-.154,5.822.939,2.769,2.66,2.756,2.149-1.372,2.27-3.172S292.419,213.692,292.419,213.692Z" transform="translate(-237.16 -187.258)" fill="#00352c"/>
        </g>
        <g transform="translate(117.095 156.526)">
          <path d="M192.094,168.693l7.512,2.916a.6.6,0,0,0,.812-.555l0-1.462a.6.6,0,0,0-.38-.556l-7.512-2.916a.6.6,0,0,0-.813.555l0,1.462A.6.6,0,0,0,192.094,168.693Z" transform="translate(-191.713 -166.079)" fill="#00352c"/>
          <path d="M192.094,177.117l7.512,2.916a.6.6,0,0,0,.812-.555l0-1.462a.6.6,0,0,0-.38-.556l-7.512-2.916a.6.6,0,0,0-.813.555l0,1.462A.6.6,0,0,0,192.094,177.117Z" transform="translate(-191.713 -174.503)" fill="#00352c"/>
          <path d="M192.094,185.542l7.512,2.916a.6.6,0,0,0,.812-.555l0-1.462a.6.6,0,0,0-.38-.557l-7.512-2.916a.6.6,0,0,0-.813.555l0,1.462A.6.6,0,0,0,192.094,185.542Z" transform="translate(-191.713 -182.927)" fill="#00352c"/>
        </g>
      </g>
    </svg>
    <div class="cover-div">
      <span></span><em id="coverSubtitle">æ±‚å¥½é‹ Â· å•å¤©æ©Ÿ</em><span></span>
    </div>
  </div>

  <div class="btn-enter-wrap" onclick="goToGame()">
    <button class="btn-enter" id="btnEnterText">æ–ä¸€æ–æ±‚ç±¤</button>
  </div>

  <div class="perm-dlg" id="permDialog">
    <div class="perm-box">
      <h3>éœ€è¦é™€èºå„€æ¬Šé™</h3>
      <p>è«‹æˆæ¬Šä½¿ç”¨è¨­å‚™é™€èºå„€ï¼Œé«”é©—è¦–å·®å‹•æ…‹æ•ˆæœã€‚</p>
      <button onclick="requestPerm()">æˆ æ¬Š</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• GAME â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="pageGame">
  <div class="tile-bg"></div>
  <div class="tile-bar top"></div>
  <div class="tile-bar bottom"></div>
  <div class="game-wrap">
    <div class="game-top">
      <svg class="game-logo" viewBox="0 0 103.276 38.725" xmlns="http://www.w3.org/2000/svg">
        <g transform="translate(-62 -149.472)">
          <g transform="translate(62 149.472)"><g><g>
            <path d="M85.169,165.46a9.785,9.785,0,0,1,15.324.017,9.843,9.843,0,0,1,2.469-.31,9.632,9.632,0,0,1,3.33.593.555.555,0,0,0,.682-.794l-4.406-7.651a1.577,1.577,0,0,0-1.377-.805l-16.7-.018a1.6,1.6,0,0,0-1.385.8l-4.431,7.652a.555.555,0,0,0,.679.8,9.669,9.669,0,0,1,3.345-.591A9.863,9.863,0,0,1,85.169,165.46Z" transform="translate(-71.549 -153.51)" fill="#00352c"/>
            <path d="M103.939,166.254l-8.333-14.469a4.59,4.59,0,0,0-3.963-2.294l-16.7-.018a4.591,4.591,0,0,0-3.968,2.285l-8.365,14.451a4.592,4.592,0,0,0,0,4.578l8.333,14.47A4.592,4.592,0,0,0,74.9,187.55l16.7.018a4.592,4.592,0,0,0,3.968-2.285l8.365-14.452A4.589,4.589,0,0,0,103.939,166.254Zm-1.185,3.254a2.9,2.9,0,0,1-.227.51l-8.365,14.452a2.962,2.962,0,0,1-2.559,1.473l-16.7-.019a2.961,2.961,0,0,1-2.555-1.479l-8.333-14.47a2.918,2.918,0,0,1-.226-.511,2.959,2.959,0,0,1,.229-2.441l8.365-14.451a2.961,2.961,0,0,1,2.558-1.473l16.7.019A2.961,2.961,0,0,1,94.2,152.6l8.333,14.469A2.958,2.958,0,0,1,102.754,169.508Z" transform="translate(-62 -149.472)" fill="#00352c"/>
            <path d="M105.579,181.382a2.711,2.711,0,0,0-.263-2.052,8.168,8.168,0,0,0-14.043-.015,8.168,8.168,0,0,0-14.043.015,2.711,2.711,0,0,0,.263,2.052l7.168,12.441a1.6,1.6,0,0,0,1.383.8h.333c-.01-.161-.024-.32-.024-.483a8.04,8.04,0,0,1,16.08.018c0,.163-.015.322-.025.483h.333a1.6,1.6,0,0,0,1.384-.8Z" transform="translate(-66.57 -162.86)" fill="#d90050"/>
            <path d="M103.367,215.888a6.413,6.413,0,0,0-6.421,6.406c0,.163.012.323.024.483l6.421.007,6.421-.007c.012-.16.025-.319.025-.483A6.414,6.414,0,0,0,103.367,215.888Z" transform="translate(-82.103 -187.678)" fill="#c0ab7c"/>
          </g></g></g>
          <g transform="translate(108.559 150.315)">
            <path d="M176.08,213.646s.094,2.4.114,6.2a2.782,2.782,0,0,1-1.472,2.473l.2.636a9.545,9.545,0,0,0,1.5-.5,2.782,2.782,0,0,0,1.472-2.473c0-1,0-4.564,0-5.218S176.08,213.646,176.08,213.646Z" transform="translate(-172.294 -187.23)" fill="#00352c"/>
            <path d="M190.862,216.934c.024-1,.111-3.274.111-3.274s.094,2.4.123,5.477c-.1,6.889a13.472,13.472,0,0,1,2.233,0S190.828,218.346,190.862,216.934Z" transform="translate(-181.469 -187.238)" fill="#00352c"/>
            <path d="M208.921,213.68s.237,4.481.072,6.495l-5.848-6.5a1.8,1.8,0,0,1-1.241,0,62.394,62.394,0,0,1-.189,9.292,3.618,3.618,0,0,1,1.258,0s-.135-5.789-.047-6.533l5.9,6.54a2.007,2.007,0,0,1,1.082,0s-.063-6.04.226-9.292Z" transform="translate(-188.93 -187.247)" fill="#00352c"/>
            <path d="M228.517,222.351a1.285,1.285,0,1,0,1.284,1.287A1.285,1.285,0,0,0,228.517,222.351Z" transform="translate(-203.608 -192.239)" fill="#00352c"/>
            <path d="M237.171,213.712s1.751-.119,4.231-.04l-4.795,8.006V223s4.485-.122,7.6.009a1.954,1.954,0,0,1,0-1.082,29.16,29.16,0,0,1-4.724.086l4.209-7.083.536-.9v-.311A54.126,54.126,0,0,1,237.171,213.712Z" transform="translate(-209.001 -187.27)" fill="#00352c"/>
            <path d="M268.506,213.746s.094,2.4.021,1.278c-.488.033-1.21.064-2.213.063-.855,0-1.473-.025-1.913-.053s.094,2.4-.1,6.889a13.472,13.472,0,0,1,2.233,0s-.082-2.531-.111-4.416c.523-.053,1.259-.114,1.913-.113.674,0,1.572.067,2.214.123a39.891,39.891,0,0,1-.136,4.411,13.469,13.469,0,0,1,2.233,0S268.472,218.432,268.506,213.746Z" transform="translate(-222.617 -187.284)" fill="#00352c"/>
            <path d="M292.419,213.692s.133,5.44-.133,8.612a3.184,3.184,0,0,1-3.474,2.829c-3.254,0-4.366-1.395-4.386-4.036-.02-2.984.162-4.048-.123-5.435a8.756,8.756,0,0,0,2.218,0s-.154,3.784-.154,5.822.939,2.769,2.66,2.756,2.149-1.372,2.27-3.172S292.419,213.692,292.419,213.692Z" transform="translate(-237.16 -187.258)" fill="#00352c"/>
          </g>
          <g transform="translate(117.095 156.526)">
            <path d="M192.094,168.693l7.512,2.916a.6.6,0,0,0,.812-.555l0-1.462a.6.6,0,0,0-.38-.556l-7.512-2.916a.6.6,0,0,0-.813.555l0,1.462A.6.6,0,0,0,192.094,168.693Z" transform="translate(-191.713 -166.079)" fill="#00352c"/>
            <path d="M192.094,177.117l7.512,2.916a.6.6,0,0,0,.812-.555l0-1.462a.6.6,0,0,0-.38-.556l-7.512-2.916a.6.6,0,0,0-.813.555l0,1.462A.6.6,0,0,0,192.094,177.117Z" transform="translate(-191.713 -174.503)" fill="#00352c"/>
            <path d="M192.094,185.542l7.512,2.916a.6.6,0,0,0,.812-.555l0-1.462a.6.6,0,0,0-.38-.557l-7.512-2.916a.6.6,0,0,0-.813.555l0,1.462A.6.6,0,0,0,192.094,185.542Z" transform="translate(-191.713 -182.927)" fill="#00352c"/>
          </g>
        </g>
      </svg>
      <div class="game-title" id="gameTitle">âœ¦ çœŸç å¥½é‹ç±¤ âœ¦</div>
    </div>

    <div class="shake-tip" id="shakeTip">
      <p><em id="shakeTipText">é»˜å¿µå¿ƒä¸­é¡˜æœ›</em><br>æ–æ™ƒæ‰‹æ©Ÿ æˆ– é»æ“Šç±¤ç­’</p>
    </div>

    <div class="shake-can" id="shakeCan" onclick="doShake()">
      <svg viewBox="0 0 152 192" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
        <defs>
          <linearGradient id="cg1" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#00352c"/><stop offset="40%" stop-color="#2d6b5e"/>
            <stop offset="60%" stop-color="#3a8070"/><stop offset="100%" stop-color="#00352c"/>
          </linearGradient>
          <linearGradient id="cg2" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" stop-color="#c0ab7c"/><stop offset="100%" stop-color="#8a7040"/>
          </linearGradient>
        </defs>
        <g id="sticks" style="opacity:0;transition:opacity .25s;">
          <rect x="52" y="12" width="7" height="76" rx="3.5" fill="#a07030" transform="rotate(-16,55,50)"/>
          <rect x="64" y="6" width="7" height="82" rx="3.5" fill="#c8904a"/>
          <rect x="76" y="10" width="7" height="78" rx="3.5" fill="#a07030" transform="rotate(11,79,49)"/>
          <rect x="88" y="7" width="6" height="80" rx="3" fill="#c8904a" transform="rotate(-7,91,47)"/>
        </g>
        <ellipse cx="76" cy="182" rx="34" ry="8" fill="#00352c"/>
        <rect x="42" y="80" width="68" height="104" rx="6" fill="url(#cg1)"/>
        <rect x="40" y="74" width="72" height="14" rx="7" fill="url(#cg2)"/>
        <ellipse cx="76" cy="74" rx="36" ry="7" fill="url(#cg2)"/>
        <!-- èŠ±ç£šè£é£¾ -->
        <rect x="50" y="92" width="14" height="14" rx="1" fill="none" stroke="rgba(192,171,124,.5)" stroke-width="1"/>
        <line x1="50" y1="99" x2="64" y2="99" stroke="rgba(192,171,124,.4)" stroke-width=".7"/>
        <line x1="57" y1="92" x2="57" y2="106" stroke="rgba(192,171,124,.4)" stroke-width=".7"/>
        <rect x="88" y="92" width="14" height="14" rx="1" fill="none" stroke="rgba(217,0,80,.45)" stroke-width="1"/>
        <line x1="88" y1="99" x2="102" y2="99" stroke="rgba(217,0,80,.35)" stroke-width=".7"/>
        <line x1="95" y1="92" x2="95" y2="106" stroke="rgba(217,0,80,.35)" stroke-width=".7"/>
        <rect x="50" y="148" width="14" height="14" rx="1" fill="none" stroke="rgba(217,0,80,.4)" stroke-width="1"/>
        <line x1="50" y1="155" x2="64" y2="155" stroke="rgba(217,0,80,.3)" stroke-width=".7"/>
        <line x1="57" y1="148" x2="57" y2="162" stroke="rgba(217,0,80,.3)" stroke-width=".7"/>
        <rect x="88" y="148" width="14" height="14" rx="1" fill="none" stroke="rgba(192,171,124,.45)" stroke-width="1"/>
        <line x1="88" y1="155" x2="102" y2="155" stroke="rgba(192,171,124,.35)" stroke-width=".7"/>
        <line x1="95" y1="148" x2="95" y2="162" stroke="rgba(192,171,124,.35)" stroke-width=".7"/>
        <rect x="42" y="126" width="68" height="1.5" fill="rgba(192,171,124,.5)"/>
        <text x="76" y="117" text-anchor="middle" font-size="13" fill="rgba(192,171,124,.9)" font-family="serif" font-weight="bold" letter-spacing="2">æ±‚</text>
        <text x="76" y="143" text-anchor="middle" font-size="13" fill="rgba(192,171,124,.9)" font-family="serif" font-weight="bold" letter-spacing="2">ç±¤</text>
        <text x="76" y="84" text-anchor="middle" font-size="8" fill="rgba(255,248,220,.75)" font-family="sans-serif" letter-spacing="1">çœŸ ç </text>
      </svg>
    </div>
    <div class="tap-hint" id="tapHint">è¼•è§¸ç±¤ç­’ æˆ– æ–æ™ƒæ‰‹æ©Ÿ</div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• RESULT â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="pageResult">
  <div class="tile-bar top" style="position:fixed;z-index:10;"></div>
  <div class="result-wrap" style="padding-top:20px;">
    <div class="r-logo-row">
      <svg class="r-logo" viewBox="0 0 103.276 38.725" xmlns="http://www.w3.org/2000/svg">
        <g transform="translate(-62 -149.472)">
          <g transform="translate(62 149.472)"><g><g>
            <path d="M85.169,165.46a9.785,9.785,0,0,1,15.324.017,9.843,9.843,0,0,1,2.469-.31,9.632,9.632,0,0,1,3.33.593.555.555,0,0,0,.682-.794l-4.406-7.651a1.577,1.577,0,0,0-1.377-.805l-16.7-.018a1.6,1.6,0,0,0-1.385.8l-4.431,7.652a.555.555,0,0,0,.679.8,9.669,9.669,0,0,1,3.345-.591A9.863,9.863,0,0,1,85.169,165.46Z" transform="translate(-71.549 -153.51)" fill="#00352c"/>
            <path d="M103.939,166.254l-8.333-14.469a4.59,4.59,0,0,0-3.963-2.294l-16.7-.018a4.591,4.591,0,0,0-3.968,2.285l-8.365,14.451a4.592,4.592,0,0,0,0,4.578l8.333,14.47A4.592,4.592,0,0,0,74.9,187.55l16.7.018a4.592,4.592,0,0,0,3.968-2.285l8.365-14.452A4.589,4.589,0,0,0,103.939,166.254Zm-1.185,3.254a2.9,2.9,0,0,1-.227.51l-8.365,14.452a2.962,2.962,0,0,1-2.559,1.473l-16.7-.019a2.961,2.961,0,0,1-2.555-1.479l-8.333-14.47a2.918,2.918,0,0,1-.226-.511,2.959,2.959,0,0,1,.229-2.441l8.365-14.451a2.961,2.961,0,0,1,2.558-1.473l16.7.019A2.961,2.961,0,0,1,94.2,152.6l8.333,14.469A2.958,2.958,0,0,1,102.754,169.508Z" transform="translate(-62 -149.472)" fill="#00352c"/>
            <path d="M105.579,181.382a2.711,2.711,0,0,0-.263-2.052,8.168,8.168,0,0,0-14.043-.015,8.168,8.168,0,0,0-14.043.015,2.711,2.711,0,0,0,.263,2.052l7.168,12.441a1.6,1.6,0,0,0,1.383.8h.333c-.01-.161-.024-.32-.024-.483a8.04,8.04,0,0,1,16.08.018c0,.163-.015.322-.025.483h.333a1.6,1.6,0,0,0,1.384-.8Z" transform="translate(-66.57 -162.86)" fill="#d90050"/>
            <path d="M103.367,215.888a6.413,6.413,0,0,0-6.421,6.406c0,.163.012.323.024.483l6.421.007,6.421-.007c.012-.16.025-.319.025-.483A6.414,6.414,0,0,0,103.367,215.888Z" transform="translate(-82.103 -187.678)" fill="#c0ab7c"/>
          </g></g></g>
          <g transform="translate(108.559 150.315)">
            <path d="M176.08,213.646s.094,2.4.114,6.2a2.782,2.782,0,0,1-1.472,2.473l.2.636a9.545,9.545,0,0,0,1.5-.5,2.782,2.782,0,0,0,1.472-2.473c0-1,0-4.564,0-5.218S176.08,213.646,176.08,213.646Z" transform="translate(-172.294 -187.23)" fill="#00352c"/>
            <path d="M190.862,216.934c.024-1,.111-3.274.111-3.274s.094,2.4.123,5.477c-.1,6.889a13.472,13.472,0,0,1,2.233,0S190.828,218.346,190.862,216.934Z" transform="translate(-181.469 -187.238)" fill="#00352c"/>
            <path d="M208.921,213.68s.237,4.481.072,6.495l-5.848-6.5a1.8,1.8,0,0,1-1.241,0,62.394,62.394,0,0,1-.189,9.292,3.618,3.618,0,0,1,1.258,0s-.135-5.789-.047-6.533l5.9,6.54a2.007,2.007,0,0,1,1.082,0s-.063-6.04.226-9.292Z" transform="translate(-188.93 -187.247)" fill="#00352c"/>
            <path d="M228.517,222.351a1.285,1.285,0,1,0,1.284,1.287A1.285,1.285,0,0,0,228.517,222.351Z" transform="translate(-203.608 -192.239)" fill="#00352c"/>
            <path d="M237.171,213.712s1.751-.119,4.231-.04l-4.795,8.006V223s4.485-.122,7.6.009a1.954,1.954,0,0,1,0-1.082,29.16,29.16,0,0,1-4.724.086l4.209-7.083.536-.9v-.311A54.126,54.126,0,0,1,237.171,213.712Z" transform="translate(-209.001 -187.27)" fill="#00352c"/>
            <path d="M268.506,213.746s.094,2.4.021,1.278c-.488.033-1.21.064-2.213.063-.855,0-1.473-.025-1.913-.053s.094,2.4-.1,6.889a13.472,13.472,0,0,1,2.233,0s-.082-2.531-.111-4.416c.523-.053,1.259-.114,1.913-.113.674,0,1.572.067,2.214.123a39.891,39.891,0,0,1-.136,4.411,13.469,13.469,0,0,1,2.233,0S268.472,218.432,268.506,213.746Z" transform="translate(-222.617 -187.284)" fill="#00352c"/>
            <path d="M292.419,213.692s.133,5.44-.133,8.612a3.184,3.184,0,0,1-3.474,2.829c-3.254,0-4.366-1.395-4.386-4.036-.02-2.984.162-4.048-.123-5.435a8.756,8.756,0,0,0,2.218,0s-.154,3.784-.154,5.822.939,2.769,2.66,2.756,2.149-1.372,2.27-3.172S292.419,213.692,292.419,213.692Z" transform="translate(-237.16 -187.258)" fill="#00352c"/>
          </g>
          <g transform="translate(117.095 156.526)">
            <path d="M192.094,168.693l7.512,2.916a.6.6,0,0,0,.812-.555l0-1.462a.6.6,0,0,0-.38-.556l-7.512-2.916a.6.6,0,0,0-.813.555l0,1.462A.6.6,0,0,0,192.094,168.693Z" transform="translate(-191.713 -166.079)" fill="#00352c"/>
            <path d="M192.094,177.117l7.512,2.916a.6.6,0,0,0,.812-.555l0-1.462a.6.6,0,0,0-.38-.556l-7.512-2.916a.6.6,0,0,0-.813.555l0,1.462A.6.6,0,0,0,192.094,177.117Z" transform="translate(-191.713 -174.503)" fill="#00352c"/>
            <path d="M192.094,185.542l7.512,2.916a.6.6,0,0,0,.812-.555l0-1.462a.6.6,0,0,0-.38-.557l-7.512-2.916a.6.6,0,0,0-.813.555l0,1.462A.6.6,0,0,0,192.094,185.542Z" transform="translate(-191.713 -182.927)" fill="#00352c"/>
          </g>
        </g>
      </svg>
      <div class="r-logo-sep"></div>
      <div class="r-logo-label">å°ç£ä½³å‘³<br>å¥½é‹ç±¤è©©</div>
    </div>

    <div class="tile-div"></div>
    <div class="r-title">
      <h2 id="resultTitle">çœŸç å¥½é‹ç±¤</h2>
      <p>JIN Â· ZHU Â· FORTUNE</p>
    </div>
    <div class="tile-div-thin"></div>

    <div class="f-card">
      <div class="card-tile-band"></div>
      <div class="card-hd">
        <div class="card-num" id="cardNum">ç¬¬ä¸€ç±¤</div>
        <div class="card-badge-row"><span class="badge badge-great" id="cardBadge">å¤§å‰</span></div>
      </div>
      <div class="card-poem" id="cardPoem"></div>
      <div class="card-sects" id="cardSects"></div>
    </div>

    <div class="tile-div-thin"></div>
    <div class="r-btns">
      <button class="rbtn rbtn-out" onclick="goToCover()">å†æ±‚ä¸€ç±¤</button>
      <button class="rbtn rbtn-fill" onclick="saveImg()">å„²å­˜çµæœ</button>
    </div>
    <div class="brand-ft">çœŸç  å°ç£ä½³å‘³ Â· JIN-ZHU Â· Copyright Â© 2026</div>
  </div>
</div>

<div id="hTrigger"></div>
<div id="panel">
  <div class="ph"><h2>âš™ å®¢è£½åŒ–è¨­å®š</h2><button class="ph-close" onclick="closePanel()">âœ•</button></div>
  <div class="pb">
    <div class="ps"><h3>æ–‡å­—è¨­å®š</h3>
      <div class="cr"><label>å°é¢å‰¯æ¨™é¡Œ</label><input type="text" id="cfg-sub" value="æ±‚å¥½é‹ Â· å•å¤©æ©Ÿ"></div>
      <div class="cr"><label>å°é¢æŒ‰éˆ•</label><input type="text" id="cfg-btn" value="æ–ä¸€æ–æ±‚ç±¤"></div>
      <div class="cr"><label>æ–ç±¤é æ¨™é¡Œ</label><input type="text" id="cfg-gtitle" value="âœ¦ çœŸç å¥½é‹ç±¤ âœ¦"></div>
      <div class="cr"><label>æ–ç±¤æç¤º</label><input type="text" id="cfg-stip" value="é»˜å¿µå¿ƒä¸­é¡˜æœ›"></div>
      <div class="cr"><label>çµæœé æ¨™é¡Œ</label><input type="text" id="cfg-rtitle" value="çœŸç å¥½é‹ç±¤"></div>
    </div>
    <div class="ps"><h3>ç±¤è©©ç®¡ç†</h3>
      <button class="p-btn" style="padding:10px;margin-bottom:10px;" onclick="addFortune()">ï¼‹ æ–°å¢ä¸€æ”¯ç±¤</button>
      <div id="fortuneList"></div>
    </div>
    <button class="p-btn" onclick="applyAll()">âœ… å¥—ç”¨è¨­å®š</button>
    <br><br>
    <button class="p-btn" style="background:transparent;border:1.5px solid #ccc;color:#999;box-shadow:none;" onclick="exportCfg()">ğŸ“¤ åŒ¯å‡º JSON</button>
  </div>
</div>

<script>
var fortunes=[
  {num:"ç¬¬ä¸€ç±¤",level:"great",badge:"å¤§å‰",
   poem:["å¥½é‹é€£é€£æ˜¥æ„æ¿ƒ","ä½³é¤šç¾å‘³æ—¥æ—¥è±","çœŸç å°å‘³è¿ç¦è‡³","è¬äº‹å¦‚æ„å–œæ°£ç›ˆ"],
   sections:[{label:"ç¸½è«–",text:"æ­¤ç±¤å¤§å‰ï¼Œå¥½é‹æ»¿æº¢ï¼Œè«¸äº‹é †é‚ï¼Œè²¡æºå»£é€²ã€‚"},{label:"äº‹æ¥­",text:"è²´äººç›¸åŠ©ï¼Œäº‹æ¥­è’¸è’¸æ—¥ä¸Šï¼Œå‡é·å¯æœŸã€‚"},{label:"æ„›æƒ…",text:"æ„Ÿæƒ…ç”œèœœç¾æ»¿ï¼Œçæƒœçœ¼å‰ç·£åˆ†ã€‚"},{label:"è²¡é‹",text:"è²¡é‹äº¨é€šï¼ŒæŠ•è³‡æœ‰åˆ©ï¼ŒæŠŠæ¡æ©Ÿæœƒã€‚"},{label:"é£²é£Ÿ",text:"é©åˆè¨­å®´æ…¶ç¥ï¼ŒçœŸç å°èœå…±äº«ä½³é¤šã€‚"}]},
  {num:"ç¬¬äºŒç±¤",level:"great",badge:"ä¸Šå‰",
   poem:["å±±çæµ·å‘³å…¥å£ç”˜","å®¶äººå…±èšè©±ç¬‘è«‡","å››å­£å¹³å®‰ç¦å£½é•·","ä¾†å¹´æ›´å‹å¾€å¹´é–“"],
   sections:[{label:"ç¸½è«–",text:"å®¶åº­å’Œæ¨‚ï¼Œè¦ªæƒ…æº«æš–ï¼Œèˆ‡æ‰€æ„›ä¹‹äººå…±åº¦å¥½æ™‚å…‰ã€‚"},{label:"äº‹æ¥­",text:"ç©©å®šæˆé•·ï¼Œæ­¥æ­¥ç‚ºç‡Ÿï¼Œå¿ èª å¾…äº‹å¿…æœ‰å›å ±ã€‚"},{label:"æ„›æƒ…",text:"å®¶åº­å’Œç¦ï¼Œå©šå§»ç¾æ»¿ã€‚"},{label:"è²¡é‹",text:"ç©©ä¸­æœ‰å¢ï¼Œé©åˆä¿å®ˆæŠ•è³‡ã€‚"},{label:"é£²é£Ÿ",text:"é©åˆèˆ‡å®¶äººåœæ¡Œå…±é£Ÿï¼Œåœ“æ¡Œå°èœæœ€ç‚ºå‰åˆ©ã€‚"}]},
  {num:"ç¬¬ä¸‰ç±¤",level:"good",badge:"ä¸­å‰",
   poem:["éœæ°´æµæ·±è‡ªæœ‰æº","å®ˆå¾—é›²é–‹æœˆæ›´åœ“","è¬äº‹è¬€å®šè€Œå¾Œå‹•","æ˜¥æš–èŠ±é–‹åœ¨çœ¼å‰"],
   sections:[{label:"ç¸½è«–",text:"æ™‚æ©Ÿæ¼¸ç†Ÿï¼Œéœå¿ƒç­‰å¾…ï¼Œä¸å®œæ“ä¹‹éæ€¥ã€‚"},{label:"äº‹æ¥­",text:"å®œç©©ç´®ç©©æ‰“ï¼Œè¨ˆåŠƒå‘¨å…¨å¾Œå†å‡ºæ‰‹ã€‚"},{label:"æ„›æƒ…",text:"æ„Ÿæƒ…éœ€è¦è€å¿ƒçŒæº‰ï¼Œçµ¦å½¼æ­¤å¤šä¸€äº›æ™‚é–“ã€‚"},{label:"è²¡é‹",text:"è²¡é‹å¹³ç©©ä¸Šæšï¼Œè¬¹æ…è¦åŠƒã€‚"},{label:"é£²é£Ÿ",text:"æ¸…æ·¡é¤Šèº«ï¼Œå°èœæ¸…è’¸æ–™ç†æœ€åˆæ™‚å®œã€‚"}]},
  {num:"ç¬¬å››ç±¤",level:"great",badge:"ç¦ç¥¿",
   poem:["é´»ç¦é½Šå¤©å–œäº‹å¤š","ä½³äººå…±åè©±å®¶å¸¸","ç ç‰æ»¿å ‚æ·»å–œè‰²","å¹³å®‰æ˜¯ç¦å‹é»ƒé‡‘"],
   sections:[{label:"ç¸½è«–",text:"ç¦ç¥¿é›™å…¨ï¼Œå®¶æ¥­èˆˆæ—ºï¼Œå–œäº‹é€£é€£ã€‚"},{label:"äº‹æ¥­",text:"åˆä½œäº‹æ¥­å¤§å‰ï¼Œé›™è´å±€é¢å¯æœŸã€‚"},{label:"æ„›æƒ…",text:"æƒ…ç·£æ·±åšï¼Œå¯ç©æ¥µé€²è¡Œå©šå«ã€‚"},{label:"è²¡é‹",text:"è²¡æºå»£é€²ï¼Œæœ‰æœ›æ‹“å±•äº‹æ¥­ç‰ˆåœ–ã€‚"},{label:"é£²é£Ÿ",text:"é©åˆè¨­å®´æ¬¾å¾…ï¼ŒçœŸç å°èœæœ€åˆæ­¤å‰æ…¶æ°›åœã€‚"}]},
  {num:"ç¬¬äº”ç±¤",level:"ok",badge:"å¹³å®‰",
   poem:["å¹³å¹³å®‰å®‰æ˜¯æœ€çœŸ","æŸ´ç±³æ²¹é¹½æœ‰é¤˜å­˜","çŸ¥è¶³å¸¸æ¨‚å¿ƒè‡ªåœ¨","ä¸€ç²¥ä¸€é£¯çš†æ˜¯æ©"],
   sections:[{label:"ç¸½è«–",text:"å¹³å®‰ç„¡äº‹å³æ˜¯ç¦ï¼ŒçŸ¥è¶³å¸¸æ¨‚ï¼Œè¸å¯¦ç”Ÿæ´»ã€‚"},{label:"äº‹æ¥­",text:"ç¾æ³ç©©å®šï¼Œè¸å¯¦é€²æ­¥ã€‚"},{label:"æ„›æƒ…",text:"æ„Ÿæƒ…å¹³é †ï¼Œäº’ç›¸é«”è«’ï¼Œå¹³æ·¡è¦‹çœŸæƒ…ã€‚"},{label:"è²¡é‹",text:"æ”¶æ”¯å¹³è¡¡ï¼Œé‡å…¥ç‚ºå‡ºï¼Œå„²è“„ç‚ºä¸Šã€‚"},{label:"é£²é£Ÿ",text:"ç°¡å–®å®¶å¸¸å°èœæœ€èƒ½æº«æš–äººå¿ƒã€‚"}]}
];
var cur=null,soundOn=true,shakeCount=0,lastA={x:0,y:0,z:0},shakeBlocked=false,tapCount=0,tapTimer=null,audioCtx=null;

window.addEventListener('load',function(){
  setTimeout(function(){ var p=document.getElementById('preloader'); p.style.opacity='0'; setTimeout(function(){ p.style.display='none'; },800); },1500);
  createPetals(); initGyro(); renderList();
  document.getElementById('soundBtn').addEventListener('click',function(){ soundOn=!soundOn; this.textContent=soundOn?'ğŸ”Š':'ğŸ”‡'; });
  document.getElementById('hTrigger').addEventListener('click',function(){
    tapCount++; if(tapTimer)clearTimeout(tapTimer);
    tapTimer=setTimeout(function(){ tapCount=0; },700);
    if(tapCount>=3){ tapCount=0; openPanel(); }
  });
});

function createPetals(){
  var s=['âœ¦','â—†','â–','â–ª','â—‡'],c=document.getElementById('pageCover');
  for(var i=0;i<12;i++){
    var p=document.createElement('div'); p.className='petal'; p.textContent=s[i%s.length];
    p.style.left=(Math.random()*100)+'%'; p.style.fontSize=(Math.random()*8+7)+'px';
    var cols=['rgba(0,53,44,','rgba(192,171,124,','rgba(217,0,80,'];
    p.style.color=cols[i%3]+(Math.random()*.25+.08)+')';
    p.style.animationDuration=(Math.random()*14+12)+'s'; p.style.animationDelay=(Math.random()*12)+'s';
    c.appendChild(p);
  }
}

function initGyro(){
  if(typeof DeviceOrientationEvent!=='undefined'&&typeof DeviceOrientationEvent.requestPermission==='function'){
    document.getElementById('permDialog').classList.add('show');
  } else if(window.DeviceMotionEvent){ window.addEventListener('devicemotion',handleMotion,false); }
  window.addEventListener('deviceorientation',handleOri,false);
}
function requestPerm(){
  document.getElementById('permDialog').classList.remove('show');
  DeviceMotionEvent.requestPermission().then(function(s){ if(s==='granted'){ window.addEventListener('devicemotion',handleMotion,false); window.addEventListener('deviceorientation',handleOri,false); } }).catch(function(){});
}
function handleMotion(e){
  if(!document.getElementById('pageGame').classList.contains('active')||shakeBlocked) return;
  var a=e.accelerationIncludingGravity; if(!a) return;
  var d=Math.abs(a.x-lastA.x)+Math.abs(a.y-lastA.y)+Math.abs(a.z-lastA.z);
  lastA={x:a.x,y:a.y,z:a.z};
  if(d>14){ shakeCount++; if(shakeCount>=2){ triggerShake(); shakeCount=0; shakeBlocked=true; } }
}
function handleOri(e){
  if(!document.getElementById('pageCover').classList.contains('active')) return;
  var gm=e.gamma||0,bt=e.beta||0,mx=(gm/90)*16,my=(bt/90)*10;
  var d=document.getElementById('lDisk');
  if(d) d.style.transform='translate(-50%,-54%) translate3d('+(mx*.4)+'px,'+(my*.3)+'px,0)';
}

function transition(cb){ var o=document.getElementById('overlay'); o.classList.add('in'); setTimeout(function(){ cb(); o.classList.remove('in'); },300); }
function showPage(id){ document.querySelectorAll('.page').forEach(function(p){ p.classList.remove('active'); }); document.getElementById(id).classList.add('active'); }
function goToGame(){
  playChord([440,554,659],.06);
  shakeBlocked=false; shakeCount=0;
  document.getElementById('shakeTip').classList.remove('hidden');
  document.getElementById('tapHint').style.display='block';
  document.getElementById('shakeCan').classList.remove('shaking');
  document.getElementById('sticks').style.opacity='0';
  transition(function(){ showPage('pageGame'); });
}
function goToCover(){ transition(function(){ showPage('pageCover'); }); }
function goToResult(){ renderResult(cur); transition(function(){ showPage('pageResult'); }); }

function doShake(){ triggerShake(); }
function triggerShake(){
  var can=document.getElementById('shakeCan');
  if(can.classList.contains('shaking')) return;
  playWood();
  document.getElementById('shakeTip').classList.add('hidden');
  can.classList.add('shaking');
  document.getElementById('sticks').style.opacity='1';
  cur=fortunes[Math.floor(Math.random()*fortunes.length)];
  setTimeout(function(){
    can.classList.remove('shaking');
    document.getElementById('sticks').style.opacity='0';
    document.getElementById('tapHint').style.display='none';
    playBell();
    launchSticks(cur,function(){ goToResult(); });
  },2050);
}

function launchSticks(f,cb){
  var ov=document.getElementById('stickOverlay'); ov.innerHTML=''; ov.classList.add('active');
  var cfg=[
    {left:'8%',r0:'-22deg',y1:'-28vh',r1:'-14deg',y2:'-60vh',r2:'-8deg',y3:'-58vh',r3:'-7deg',dur:'1.15s',delay:'0s'},
    {left:'28%',r0:'-8deg',y1:'-32vh',r1:'-3deg',y2:'-66vh',r2:'-1deg',y3:'-64vh',r3:'-1deg',dur:'1.1s',delay:'0.1s'},
    {left:'50%',r0:'4deg',y1:'-34vh',r1:'1deg',y2:'-68vh',r2:'1deg',y3:'-66vh',r3:'1deg',dur:'1.12s',delay:'0.18s'},
    {left:'68%',r0:'14deg',y1:'-30vh',r1:'8deg',y2:'-62vh',r2:'5deg',y3:'-60vh',r3:'5deg',dur:'1.08s',delay:'0.08s'}
  ];
  for(var i=0;i<4;i++){ (function(idx){
    var c=cfg[idx],el=document.createElement('div'); el.className='flying-stick'; el.textContent=f.poem[idx]||'';
    el.style.left=c.left;
    ['r0','y1','r1','y2','r2','y3','r3','dur','delay'].forEach(function(k){ el.style.setProperty('--'+k,c[k]); });
    ov.appendChild(el);
  })(i); }
  setTimeout(function(){ ov.classList.remove('active'); ov.innerHTML=''; if(cb)cb(); },1700);
}

function renderResult(f){
  document.getElementById('cardNum').textContent=f.num;
  var b=document.getElementById('cardBadge'); b.textContent=f.badge; b.className='badge badge-'+f.level;
  var pe=document.getElementById('cardPoem'); pe.innerHTML='';
  f.poem.forEach(function(l,i){ var p=document.createElement('p'); p.className='poem-line'; p.textContent=l; p.style.animationDelay=(i*.18+.08)+'s'; pe.appendChild(p); });
  var se=document.getElementById('cardSects'); se.innerHTML='';
  f.sections.forEach(function(s,i){ var d=document.createElement('div'); d.className='sect'; d.innerHTML='<span class="sect-tag">'+s.label+'</span><span class="sect-body">'+s.text+'</span>'; d.style.animationDelay=(i*.1+.45)+'s'; se.appendChild(d); });
}

function getCtx(){ if(!audioCtx){ try{ audioCtx=new(window.AudioContext||window.webkitAudioContext)(); }catch(e){ return null; } } if(audioCtx.state==='suspended') audioCtx.resume(); return audioCtx; }
function playNote(f,v,d,t,w){ if(!soundOn) return; var c=getCtx(); if(!c) return; var tm=w||c.currentTime; try{ var o=c.createOscillator(),g=c.createGain(); o.connect(g); g.connect(c.destination); o.frequency.value=f; o.type=t||'sine'; g.gain.setValueAtTime(0,tm); g.gain.linearRampToValueAtTime(v,tm+.018); g.gain.exponentialRampToValueAtTime(.0001,tm+d); o.start(tm); o.stop(tm+d+.05); }catch(e){} }
function playChord(fs,v){ fs.forEach(function(f){ playNote(f,v,.85,'sine'); }); }
function playWood(){ var c=getCtx(); if(!c) return; [0,.11,.27,.44,.59,.76,.93,1.1,1.28,1.47,1.65,1.82].forEach(function(t){ var f=180+Math.random()*160; playNote(f,.09,.07,'triangle',c.currentTime+t); playNote(f*1.6,.045,.055,'triangle',c.currentTime+t+.014); }); }
function playBell(){ var c=getCtx(); if(!c) return; [880,1108,1318,1760,2093].forEach(function(f,i){ playNote(f,.07-i*.01,1.4,'sine',c.currentTime+i*.038); }); }

function openPanel(){ document.getElementById('panel').classList.add('open'); }
function closePanel(){ document.getElementById('panel').classList.remove('open'); }
function applyAll(){
  document.getElementById('coverSubtitle').textContent=document.getElementById('cfg-sub').value;
  document.getElementById('btnEnterText').textContent=document.getElementById('cfg-btn').value;
  document.getElementById('gameTitle').textContent=document.getElementById('cfg-gtitle').value;
  document.getElementById('shakeTipText').textContent=document.getElementById('cfg-stip').value;
  document.getElementById('resultTitle').textContent=document.getElementById('cfg-rtitle').value;
  closePanel();
  var h=document.createElement('div');
  h.style.cssText='position:fixed;bottom:28px;left:50%;transform:translateX(-50%);background:#2d6b5e;color:#fff;padding:9px 22px;border-radius:4px;font-size:.82rem;letter-spacing:.2em;z-index:9999;';
  h.textContent='è¨­å®šå·²å¥—ç”¨ âœ“'; document.body.appendChild(h);
  setTimeout(function(){ h.style.transition='opacity .5s'; h.style.opacity='0'; setTimeout(function(){ h.remove(); },500); },1600);
}
function renderList(){
  var l=document.getElementById('fortuneList'); l.innerHTML='';
  fortunes.forEach(function(f,i){
    var d=document.createElement('div'); d.className='fi';
    d.innerHTML='<div class="fi-hd"><span>'+f.num+' Â· '+f.badge+'</span><button onclick="removeFortune('+i+')">âœ•</button></div>'+
      '<div class="cr"><label>ç±¤å</label><input type="text" value="'+f.num+'" onchange="fortunes['+i+'].num=this.value"></div>'+
      '<div class="cr"><label>ç‰ŒåŒ¾</label><input type="text" value="'+f.badge+'" onchange="fortunes['+i+'].badge=this.value"></div>'+
      '<div class="cr"><label>ç­‰ç´š</label><select onchange="fortunes['+i+'].level=this.value">'+['great','good','ok','bad'].map(function(l){ return '<option value="'+l+'"'+(f.level==l?' selected':'')+'>'+l+'</option>'; }).join('')+'</select></div>'+
      '<div class="cr"><label>ç±¤è©©ï¼ˆæ¯è¡Œä¸€å¥ï¼‰</label><textarea onchange="fortunes['+i+'].poem=this.value.split(\'\\n\').slice(0,4)">'+f.poem.join('\n')+'</textarea></div>';
    l.appendChild(d);
  });
}
function addFortune(){ fortunes.push({num:'ç¬¬'+(fortunes.length+1)+'ç±¤',level:'good',badge:'å‰',poem:['ç¬¬ä¸€å¥ç±¤è©©','ç¬¬äºŒå¥ç±¤è©©','ç¬¬ä¸‰å¥ç±¤è©©','ç¬¬å››å¥ç±¤è©©'],sections:[{label:'ç¸½è«–',text:'è«‹è¼¸å…¥è§£èªªæ–‡å­—ã€‚'}]}); renderList(); }
function removeFortune(i){ if(fortunes.length<=1){ alert('è‡³å°‘éœ€è¦ä¸€æ”¯ç±¤ï¼'); return; } fortunes.splice(i,1); renderList(); }
function exportCfg(){ var a=document.createElement('a'); a.href=URL.createObjectURL(new Blob([JSON.stringify({fortunes:fortunes},null,2)],{type:'application/json'})); a.download='jinzhu-config.json'; a.click(); }
function saveImg(){ alert('è«‹é•·æŒ‰ç•«é¢æˆªåœ–å„²å­˜ç±¤è©©çµæœã€‚'); }
</script>
</body>
</html>
